

@{
    var category = ViewBag.SelectedCategory as AfricanShopLviv.BLL.DTO.CategoryDto;

    using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div style="border: 1px solid gold; border-radius: 16px;padding:16px" class="form-horizontal">
            <h4>Edit Category</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => category.Id)

            <div class="form-group">
                @Html.LabelFor(model => category.Name, htmlAttributes: new { id = "lbl", @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => category.Name, new { htmlAttributes = new { @class = "form-control", Name = "name" } })
                    @Html.ValidationMessageFor(model => category.Name, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.Label("Photo", htmlAttributes: new { id = "lbl", @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <input name="photo" id="fileinput" type="file" accept=".jpg, .jpeg, .png, .icon, .ico, .gif">
                    @*<input type="file" id="fileUpload" />*@
                    <input type="button" id="btnUpload" value="Upload Photo" class="form-control-file" />
                    @Html.ValidationMessageFor(model => category.Photo, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group" style="margin-top:9px">
                <div class="col-md-offset-10 col-md-10">
                    <input style="width:100%" name="btn-EditCategory" type="submit" value="Update" class="btn btn-primary" />
                </div>
            </div>
        </div>
    }

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#btnUpload').click(function () {

                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {

                    var fileUpload = $("#fileinput").get(0);
                    var files = fileUpload.files;

                    // Create FormData object
                    var fileData = new FormData();

                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {
                        fileData.append(files[i].name, files[i]);
                    }

                    $.ajax({
                        url: '/Admin/PhotoUpload',
                        type: "POST",
                        contentType: false,
                        processData: false,
                        data: fileData,
                        success: function (result) {
                            alert(result);
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
        });
    </script>

    @*<script>
        var photo = document.getElementById("photo");
        var name = document.getElementById("name");
        var category = { phto: photo, catName: name };
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'POST',
            url: '/Home/UpdateCategory',
            data: mailInfo,
            success: function (result) {
                alert(result);
            },
            error: function (err) {
                alert(err.statusText);
            });
});
    </script>*@

    <style>
        #lbl {
        }
    </style>
    <div>
        @Html.ActionLink("Back to List", "_829528a_441d_484m_862i_22475963ffdn", "admin", new { isPartView = "true", partViewName = "CategoryPart" }, new { @class = "btn btn-primary" })
    </div>

}